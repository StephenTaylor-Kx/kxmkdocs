KX MkDocs template
==================


The content at [code.kx.com](https://code.kx.com/) consists of static HTML subsites generated by [MkDocs](https://mkdocs.org). 
This repo is a template for a MkDocs instance for such a subsite.

It uses the [Material for MkDocs](https://squidfunk.github.io/mkdocs-material/) theme, and font files from [Swiss Typefaces](https://swisstypefaces.com), licensed for use only on kx.com. 


Requirements
------------

Docker



MkDocs instance
---------------

Use the contents of the `mkdocs` folder as a template for your MkDocs instance.

Keep the `dev_address` as 8000. This is the port the Docker image exposes. 

The text `FIXME` marks where in the configuration file `mkdocs.yml` you need values for your subsite. 

The `nav` section is commented out. Uncomment it and use it to define your navigation tree. 
In the `theme` section the `features` subsection is commented out. Uncommenting it enables the top navigation tabs. 
If you do this, you will need to group under `Home` all the pages you want to appear in the LHS nav tree when on the Home page. 



Editing with live preview
-------------------------

The `run.sh` script spins up a Docker container with the required versions of 

-   MkDocs
-   Material for MkDocs
-   PyMdown extensions

Example usage:

```bash
./run.sh ~/path/to/mkdocs/root 8010
```

where `~/path/to/mkdocs/root` is the container of your MkDocs instance, i.e. the parent folder of `mkdocs.yml`.
This must be an absolute filepath or (as above) relative to your home folder; it cannot be relative to your current working directory. 

You can then browse to `localhost:8010` to see the live preview of your subsite. (It is refreshed when you save a source file.)

The script runs  `mkdocs serve` with the `--dirtyreload` option by default: when you save a Markdown source file, only that fileâ€™s HTML is recompiled.
In particular, edits to the configuration file `mkdocs.yml` are not reflected. 

To see the result of edits to the configuration file, terminate and restart the container. Or, run the script with the `clean` option, e.g.

```bash
./run.sh ~/path/to/mkdocs/root 8010 clean
```

in which case the entire site is recompiled after each change is saved.

See the Material for MkDocs [documentation](https://squidfunk.github.io/mkdocs-material/) for details of the various extensions to Markdown available. 
The site makes extensive use of admonitions, FontAwesome icons and labelled code fences. 
The source code for code.kx.com/q is at [github.com/kxsys/docs](https://github.com/kxsys/docs) and contains many examples of these in use. 


Building the subsite
--------------------

The Librarian will build the HTML for code.kx.com from your source. 

The `build.sh` script will compile a site you can ship to clients. 
The resulting site (by default in your `site` subfolder`) is self-contained and should display correctly on an isolated machine. 


Queries to [librarian@kx.com](mailto:librarian@kx.com). 